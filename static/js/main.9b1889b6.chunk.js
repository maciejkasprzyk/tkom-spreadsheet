(this["webpackJsonptkom-spreadsheet"]=this["webpackJsonptkom-spreadsheet"]||[]).push([[0],[,,,,,,function(e,r,t){e.exports={Spreadsheet:"Spreadsheet_Spreadsheet__2MlAU",focus:"Spreadsheet_focus__2PRei",error:"Spreadsheet_error__2OBGk"}},,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_App_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(23),_App_css__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_App_css__WEBPACK_IMPORTED_MODULE_1__),_components_Spreadsheet__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(13),_mobx_SpreadsheetStore__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(14),store=new _mobx_SpreadsheetStore__WEBPACK_IMPORTED_MODULE_3__.a(5,10);function App(){return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var r=0;store.cells[r][0].set("Self reference"),store.cells[r][1].set("=B1"),store.cells[++r][0].set("Cycle"),store.cells[r][1].set("=C2"),store.cells[r][2].set("=B2"),store.cells[++r][0].set("Auto update working"),store.cells[r][2].set("=B3"),store.cells[r][3].set("=B3+C3"),store.cells[r][1].set("co\u015b"),store.cells[++r][0].set("Simple math");var x="1+2*(5+5)+2/3+((1*3))/2";store.cells[r][1].set("="+x),store.cells[r][2].set("is ".concat(eval(x))),store.cells[++r][0].set("Complex math"),x="1-1+2*(5+5)+2/3+((1*3))/2",store.cells[r][1].set("="+x),store.cells[r][2].set("is ".concat(eval(x))),store.cells[++r][0].set("Negative numbers"),x="1-1+1",store.cells[r][1].set("="+x),store.cells[r][2].set("is ".concat(eval(x))),store.cells[++r][0].set("Math with labels"),store.cells[r][1].set("=C7+D7*E7"),store.cells[r][2].set("2"),store.cells[r][3].set("2"),store.cells[r][4].set("2"),store.cells[++r][0].set("Invalid formulas"),store.cells[r][1].set("=C7D7*E7"),store.cells[r][2].set("=as325"),store.cells[r][3].set("=1**2"),store.cells[++r][0].set("* and / order"),x="3/3*3",store.cells[r][1].set("="+x),store.cells[r][2].set("is ".concat(eval(x))),store.cells[++r][0].set("- at the begging and --"),x="-1+2",store.cells[r][1].set("="+x),store.cells[r][2].set("is ".concat(eval(x)))}),[]),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"App"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_Spreadsheet__WEBPACK_IMPORTED_MODULE_2__.a,{x:store.x,y:store.y,cells:store.cells,onCellSet:function(e,r){e.set(r)}}))}__webpack_exports__.a=App},function(e,r,t){"use strict";var s=t(2),a=t(9),l=t.n(a),n=t(0),o=t.n(n),c=t(16),u=t(6),i=t.n(u),_=l.a.mark(p);function p(){var e,r,t;return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e=function(e){return String.fromCharCode(e.charCodeAt(0)+1)},r=["A"];case 2:return s.next=5,r.slice().reverse().join("");case 5:r[t=0]=e(r[t]);case 7:if(!(r[t].charCodeAt(0)>"Z".charCodeAt(0))){s.next=16;break}if(r[t]="A",!(++t>=r.length)){s.next=13;break}return r.push("A"),s.abrupt("break",16);case 13:r[t]=e(r[t]),s.next=7;break;case 16:s.next=2;break;case 18:case"end":return s.stop()}}),_)}r.a=Object(c.a)((function(e){var r=function(e){var r=Object(n.useState)(e),t=Object(s.a)(r,2),a=t[0],l=t[1];return[function(e){return a&&a.x===e.x&&a.y===e.y},function(e){l(null==e?null:{x:e.x,y:e.y})}]}(),t=Object(s.a)(r,2),a=t[0],l=t[1],c=function(e){13===e.keyCode&&e.target.blur()},u=p();return o.a.createElement("div",{className:i.a.Spreadsheet},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null),Array(e.x).fill(0).map((function(e,r){return o.a.createElement("th",{key:r},u.next().value)})))),o.a.createElement("tbody",null,e.cells.map((function(r,t){return o.a.createElement("tr",{key:t},o.a.createElement("th",null,t+1),r.map((function(r,t){return o.a.createElement("td",{onClick:function(e){return function(e,r){l(r)}(0,r)},key:t},a(r)?o.a.createElement("input",{onKeyDown:c,onFocus:function(e){return function(e,r){e.target.value=r.formula?r.formula:r.value,e.target.parentNode.classList.add(i.a.focus)}(e,r)},onBlur:function(t){return function(r,t){e.onCellSet(t,r.target.value),r.target.parentNode.classList.remove(i.a.focus),a(t)&&l(null)}(t,r)},autoFocus:!0}):o.a.createElement("div",{className:r.error?i.a.error:""},r.error?r.error:r.value))})))})))))}))},function(e,r,t){"use strict";t.d(r,"a",(function(){return b}));var s,a,l,n,o=t(7),c=t(4),u=t(5),i=t(8),_=(t(27),t(1)),p=t(28).Parser,h=(s=function(){function e(r,t,s){Object(c.a)(this,e),Object(o.a)(this,"formula",a,this),Object(o.a)(this,"value",l,this),Object(o.a)(this,"error",n,this),this.observers=[],this.subjects=[],this.sheet=r,this.x=t,this.y=s}return Object(u.a)(e,[{key:"set",value:function(e){this.unregisterFromAllSubjects();try{if(function(e){return"="===e.charAt(0)}(e)){this.formula=e;var r=new p(this.sheet.getCellByLabel.bind(this.sheet));r.feed(this.formula.substring(1)),this.value=r.results;var t=r.cellsReferenced,s=!0,a=!1,l=void 0;try{for(var n,o=t[Symbol.iterator]();!(s=(n=o.next()).done);s=!0){var c=n.value;this.observe(c)}}catch(v){a=!0,l=v}finally{try{s||null==o.return||o.return()}finally{if(a)throw l}}}else{var u=parseFloat(e);isNaN(u)?this.value=e:this.value=u,this.formula=null}var i=this.topologicalSort(),_=!0,h=!1,b=void 0;try{for(var f,m=i[Symbol.iterator]();!(_=(f=m.next()).done);_=!0){f.value.calculateValue()}}catch(v){h=!0,b=v}finally{try{_||null==m.return||m.return()}finally{if(h)throw b}}this.error=null}catch(y){this.error=y.message}}},{key:"unregisterFromAllSubjects",value:function(){var e=!0,r=!1,t=void 0;try{for(var s,a=this.subjects[Symbol.iterator]();!(e=(s=a.next()).done);e=!0){s.value.unregisterObserver(this)}}catch(l){r=!0,t=l}finally{try{e||null==a.return||a.return()}finally{if(r)throw t}}this.subjects=[]}},{key:"observe",value:function(e){e.registerObserver(this),this.subjects.push(e)}},{key:"topologicalSort",value:function(){var e=[],r=[];return function t(s){if(r.includes(s))return;if(e.includes(s))throw Error("cycle");e.push(s);var a=!0,l=!1,n=void 0;try{for(var o,c=s.observers[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=o.value;t(u)}}catch(i){l=!0,n=i}finally{try{a||null==c.return||c.return()}finally{if(l)throw n}}r.push(s)}(this),r.reverse().slice(1)}},{key:"registerObserver",value:function(e){this.observers.push(e)}},{key:"unregisterObserver",value:function(e){var r=this.observers.indexOf(e);r===this.observers.length-1?this.observers.pop():this.observers[r]=this.observers.pop()}},{key:"calculateValue",value:function(){var e=new p(this.sheet.getCellByLabel.bind(this.sheet));e.feed(this.formula.substring(1)),this.value=e.results}}]),e}(),a=Object(i.a)(s.prototype,"formula",[_.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=Object(i.a)(s.prototype,"value",[_.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n=Object(i.a)(s.prototype,"error",[_.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s),b=function(){function e(r,t){Object(c.a)(this,e),this.cells=[],this.x=r,this.y=t,this.cells=Array(t);for(var s=0;s<t;s++){this.cells[s]=Array(r);for(var a=0;a<r;a++)this.cells[s][a]=new h(this,s,a)}}return Object(u.a)(e,[{key:"getCellByLabel",value:function(e){e=e.toUpperCase();for(var r,t=0;t<e.length&&(r=e[t],"A".charCodeAt(0)<=r.charCodeAt(0)&&r.charCodeAt(0)<="Z".charCodeAt(0));)t++;var s=e.substring(0,t),a=e.substring(t);if(0===s.length||0===a.length)throw Error("Incorrect label: ".concat(e));for(var l=parseInt(a)-1,n=0,o=0;o<s.length;o++)n*="Z".charCodeAt(0)-"A".charCodeAt(0)+1,n+=s[o].charCodeAt(0)-"A".charCodeAt(0);if(this.x<=n||this.y<=l)throw Error("No cell: ".concat(e));return this.cells[l][n]}}]),e}()},,,function(e,r,t){e.exports=t(29)},,,,,function(e,r,t){},function(e,r,t){},,,,,function(e,r,t){"use strict";t.r(r);var s=t(4),a=t(5),l=t(10),n={},o=t(2),c={main:{whitespace:{match:/[\s]+/,lineBreaks:!0},func_call:{match:/[a-zA-Z_$][0-9a-zA-Z_$]*\(/,push:"func_args",value:function(e){return e.slice(0,-1)}},label:/[a-zA-Z]+[1-9]+[0-9]*/,plus:"+",asterisk:"*",slash:"/",minus:"-",lparen:"(",rparen:")",number:{match:/[1-9][0-9]*(?:,[0-9]*)?|0\.[0-9]+/,value:function(e){return parseFloat(e)}}},func_args:{func_call_end:{match:")",pop:1},label:/[a-zA-Z]+[1-9]+[0-9]*/,semicolon:";",colon:":",whitespace:/[ ]+/}};var u,i=t(15).states(c);i.next=(u=i.next,function(){for(var e;(e=u.call(i))&&"whitespace"===e.type;);return e});var _={Lexer:i,ParserRules:[{name:"input",symbols:["expression"]},{name:"expression",symbols:["multi_expr"],postprocess:function(e){var r=Object(o.a)(e,1)[0];return n.log("expression"),n.log("a:",r),r}},{name:"expression",symbols:["expression",i.has("plus")?{type:"plus"}:plus,"multi_expr"],postprocess:function(e){var r=Object(o.a)(e,3),t=r[0],s=(r[1],r[2]);return n.log("expression"),n.log("a:",t),n.log("b:",s),t+s}},{name:"expression",symbols:["expression",i.has("minus")?{type:"minus"}:minus,"multi_expr"],postprocess:function(e){var r=Object(o.a)(e,3),t=r[0],s=(r[1],r[2]);return n.log("expression"),n.log("a:",t),n.log("b:",s),t-s}},{name:"multi_expr",symbols:["primary"],postprocess:function(e){var r=Object(o.a)(e,1)[0];return n.log("multi_expr"),n.log("a:",r),r}},{name:"multi_expr",symbols:["multi_expr",i.has("asterisk")?{type:"asterisk"}:asterisk,"primary"],postprocess:function(e){var r=Object(o.a)(e,3),t=r[0],s=(r[1],r[2]);return n.log("multi_expr"),n.log("a:",t),n.log("b:",s),t*s}},{name:"multi_expr",symbols:["multi_expr",i.has("slash")?{type:"slash"}:slash,"primary"],postprocess:function(e){var r=Object(o.a)(e,3),t=r[0],s=(r[1],r[2]);return n.log("multi_expr"),n.log("a:",t),n.log("b:",s),t/s}},{name:"primary",symbols:[i.has("lparen")?{type:"lparen"}:lparen,"expression",i.has("rparen")?{type:"rparen"}:rparen],postprocess:function(e){return e[1]}},{name:"primary",symbols:[i.has("number")?{type:"number"}:number],postprocess:function(e){var r=Object(o.a)(e,1)[0];return n.log("number:",r.value),r.value}},{name:"primary",symbols:[i.has("minus")?{type:"minus"}:minus,i.has("number")?{type:"number"}:number],postprocess:function(e){var r=Object(o.a)(e,2),t=(r[0],r[1]);return n.log("number:",t.value),-t.value}},{name:"primary",symbols:["cell_ref"],postprocess:function(e){return e[0]}},{name:"primary",symbols:["func"],postprocess:function(e){var r=Object(o.a)(e,1)[0];return n.log("func:",r),r}},{name:"cell_ref",symbols:[i.has("label")?{type:"label"}:label],postprocess:function(e){var r=Object(o.a)(e,1)[0];return n.log("label:",r.value),n.getByLabel(r.value)}},{name:"func",symbols:[i.has("func_call")?{type:"func_call"}:func_call,"args",i.has("func_call_end")?{type:"func_call_end"}:func_call_end],postprocess:function(e){var r=Object(o.a)(e,2),t=r[0],s=r[1];n.log("func_name:",t.value),n.log("args:",s);var a=0,l=!0,c=!1,u=void 0;try{for(var i,_=s[Symbol.iterator]();!(l=(i=_.next()).done);l=!0){a+=i.value}}catch(p){c=!0,u=p}finally{try{l||null==_.return||_.return()}finally{if(c)throw u}}return a}},{name:"args",symbols:["range"],postprocess:function(e){var r=Object(o.a)(e,1)[0];return n.log("range:",r),r}},{name:"args",symbols:["list"],postprocess:function(e){var r=Object(o.a)(e,1)[0];return n.log("list(args):",r),r}},{name:"range",symbols:[i.has("label")?{type:"label"}:label,i.has("colon")?{type:"colon"}:colon,i.has("label")?{type:"label"}:label],postprocess:function(e){var r=Object(o.a)(e,3),t=r[0],s=(r[1],r[2]);return n.log("label1:",t.value),n.log("label2:",s.value),[t.value,":",s.value]}},{name:"list",symbols:[i.has("label")?{type:"label"}:label],postprocess:function(e){var r=Object(o.a)(e,1)[0];return n.getByLabel(r.value),n.log("label(list):",r.value),[n.getByLabel(r.value)]}},{name:"list",symbols:[i.has("label")?{type:"label"}:label,i.has("semicolon")?{type:"semicolon"}:semicolon,"list"],postprocess:function(e){var r=Object(o.a)(e,3),t=r[0],s=(r[1],r[2]);return n.getByLabel(t.value),n.log("label(label ; list):",t.value),n.log("list(label ; list):",s),s.push(n.getByLabel(t.value)),s}}],ParserStart:"input"};t.d(r,"Parser",(function(){return p}));var p=function(){function e(r){var t=this;Object(s.a)(this,e),this.cellsReferenced=[],this.parser=new l.Parser(l.Grammar.fromCompiled(_)),n.getByLabel=function(e){var s=r(e);return t.cellsReferenced.push(s),s.value};n.log=function(){}}return Object(a.a)(e,[{key:"feed",value:function(e){return this.parser.feed(e)}},{key:"results",get:function(){return this.parser.results[0][0]}}]),e}()},function(e,r,t){"use strict";t.r(r);var s=t(0),a=t.n(s),l=t(3),n=t.n(l),o=(t(22),t(12));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(a.a.createElement(o.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[17,1,2]]]);
//# sourceMappingURL=main.9b1889b6.chunk.js.map