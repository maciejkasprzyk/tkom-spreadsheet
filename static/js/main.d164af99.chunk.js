(this["webpackJsonptkom-spreadsheet"]=this["webpackJsonptkom-spreadsheet"]||[]).push([[0],[,,,,,,function(e,r,t){e.exports={Spreadsheet:"Spreadsheet_Spreadsheet__2MlAU",focus:"Spreadsheet_focus__2PRei",error:"Spreadsheet_error__2OBGk"}},,,,,function(e,r,t){"use strict";t.r(r),t.d(r,"postProcessors",(function(){return s}));var s={}},function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_App_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(22),_App_css__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_App_css__WEBPACK_IMPORTED_MODULE_1__),_components_Spreadsheet__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(13),_mobx_SpreadsheetStore__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(14),store=new _mobx_SpreadsheetStore__WEBPACK_IMPORTED_MODULE_3__.a(5,10);function App(){return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var r=0;store.cells[r][0].set("Self reference"),store.cells[r][1].set("=B1"),store.cells[++r][0].set("Cycle"),store.cells[r][1].set("=C2"),store.cells[r][2].set("=B2"),store.cells[++r][0].set("Auto update working"),store.cells[r][2].set("=B3"),store.cells[r][3].set("=B3+C3"),store.cells[r][1].set("co\u015b"),store.cells[++r][0].set("Simple math");var x="1+2*(5+5)+2/3+((1*3))/2";store.cells[r][1].set("="+x),store.cells[r][2].set("is ".concat(eval(x))),store.cells[++r][0].set("Complex math"),x="1-1+2*(5+5)+2/3+((1*3))/2",store.cells[r][1].set("="+x),store.cells[r][2].set("is ".concat(eval(x))),store.cells[++r][0].set("Negative numbers"),x="1-1+1",store.cells[r][1].set("="+x),store.cells[r][2].set("is ".concat(eval(x))),store.cells[++r][0].set("Math with labels"),store.cells[r][1].set("=C7+D7*E7"),store.cells[r][2].set("2"),store.cells[r][3].set("2"),store.cells[r][4].set("2"),store.cells[++r][0].set("Invalid formulas"),store.cells[r][1].set("=C7D7*E7"),store.cells[r][2].set("=as325"),store.cells[r][3].set("=1**2"),store.cells[++r][0].set("* and / order"),x="3/3*3",store.cells[r][1].set("="+x),store.cells[r][2].set("is ".concat(eval(x))),store.cells[++r][0].set("- at the begging and --"),x="-1+2",store.cells[r][1].set("="+x),store.cells[r][2].set("is ".concat(eval(x)))}),[]),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"App"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_Spreadsheet__WEBPACK_IMPORTED_MODULE_2__.a,{x:store.x,y:store.y,cells:store.cells,onCellSet:function(e,r){e.set(r)}}))}__webpack_exports__.a=App},function(e,r,t){"use strict";var s=t(2),a=t(9),l=t.n(a),n=t(0),o=t.n(n),c=t(15),u=t(6),i=t.n(u),p=l.a.mark(_);function _(){var e,r,t;return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e=function(e){return String.fromCharCode(e.charCodeAt(0)+1)},r=["A"];case 2:return s.next=5,r.slice().reverse().join("");case 5:r[t=0]=e(r[t]);case 7:if(!(r[t].charCodeAt(0)>"Z".charCodeAt(0))){s.next=16;break}if(r[t]="A",!(++t>=r.length)){s.next=13;break}return r.push("A"),s.abrupt("break",16);case 13:r[t]=e(r[t]),s.next=7;break;case 16:s.next=2;break;case 18:case"end":return s.stop()}}),p)}r.a=Object(c.a)((function(e){var r=function(e){var r=Object(n.useState)(e),t=Object(s.a)(r,2),a=t[0],l=t[1];return[function(e){return a&&a.x===e.x&&a.y===e.y},function(e){l(null==e?null:{x:e.x,y:e.y})}]}(),t=Object(s.a)(r,2),a=t[0],l=t[1],c=function(e){13===e.keyCode&&e.target.blur()},u=_();return o.a.createElement("div",{className:i.a.Spreadsheet},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null),Array(e.x).fill(0).map((function(e,r){return o.a.createElement("th",{key:r},u.next().value)})))),o.a.createElement("tbody",null,e.cells.map((function(r,t){return o.a.createElement("tr",{key:t},o.a.createElement("th",null,t+1),r.map((function(r,t){return o.a.createElement("td",{onClick:function(e){return function(e,r){l(r)}(0,r)},key:t},a(r)?o.a.createElement("input",{onKeyDown:c,onFocus:function(e){return function(e,r){e.target.value=r.formula?r.formula:r.value,e.target.parentNode.classList.add(i.a.focus)}(e,r)},onBlur:function(t){return function(r,t){e.onCellSet(t,r.target.value),r.target.parentNode.classList.remove(i.a.focus),a(t)&&l(null)}(t,r)},autoFocus:!0}):o.a.createElement("div",{className:r.error?i.a.error:""},r.error?r.error:r.value))})))})))))}))},function(e,r,t){"use strict";t.d(r,"a",(function(){return h}));var s,a,l,n,o=t(7),c=t(4),u=t(5),i=t(8),p=(t(26),t(1)),_=t(27).Parser,f=(s=function(){function e(r,t,s){Object(c.a)(this,e),Object(o.a)(this,"formula",a,this),Object(o.a)(this,"value",l,this),Object(o.a)(this,"error",n,this),this.observers=[],this.subjects=[],this.sheet=r,this.x=t,this.y=s}return Object(u.a)(e,[{key:"set",value:function(e){this.unregisterFromAllSubjects();try{if(function(e){return"="===e.charAt(0)}(e)){this.formula=e;var r=new _(this.sheet.getCellByLabel.bind(this.sheet));r.feed(this.formula.substring(1)),this.value=r.results;var t=r.cellsReferenced,s=!0,a=!1,l=void 0;try{for(var n,o=t[Symbol.iterator]();!(s=(n=o.next()).done);s=!0){var c=n.value;this.observe(c)}}catch(v){a=!0,l=v}finally{try{s||null==o.return||o.return()}finally{if(a)throw l}}}else{var u=parseFloat(e);isNaN(u)?this.value=e:this.value=u,this.formula=null}var i=this.topologicalSort(),p=!0,f=!1,h=void 0;try{for(var b,m=i[Symbol.iterator]();!(p=(b=m.next()).done);p=!0){b.value.calculateValue()}}catch(v){f=!0,h=v}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}this.error=null}catch(y){this.error=y.message}}},{key:"unregisterFromAllSubjects",value:function(){var e=!0,r=!1,t=void 0;try{for(var s,a=this.subjects[Symbol.iterator]();!(e=(s=a.next()).done);e=!0){s.value.unregisterObserver(this)}}catch(l){r=!0,t=l}finally{try{e||null==a.return||a.return()}finally{if(r)throw t}}this.subjects=[]}},{key:"observe",value:function(e){e.registerObserver(this),this.subjects.push(e)}},{key:"topologicalSort",value:function(){var e=[],r=[];return function t(s){if(r.includes(s))return;if(e.includes(s))throw Error("cycle");e.push(s);var a=!0,l=!1,n=void 0;try{for(var o,c=s.observers[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=o.value;t(u)}}catch(i){l=!0,n=i}finally{try{a||null==c.return||c.return()}finally{if(l)throw n}}r.push(s)}(this),r.reverse().slice(1)}},{key:"registerObserver",value:function(e){this.observers.push(e)}},{key:"unregisterObserver",value:function(e){var r=this.observers.indexOf(e);r===this.observers.length-1?this.observers.pop():this.observers[r]=this.observers.pop()}},{key:"calculateValue",value:function(){var e=new _(this.sheet.getCellByLabel.bind(this.sheet));e.feed(this.formula.substring(1)),this.value=e.results}}]),e}(),a=Object(i.a)(s.prototype,"formula",[p.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=Object(i.a)(s.prototype,"value",[p.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n=Object(i.a)(s.prototype,"error",[p.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s),h=function(){function e(r,t){Object(c.a)(this,e),this.cells=[],this.x=r,this.y=t,this.cells=Array(t);for(var s=0;s<t;s++){this.cells[s]=Array(r);for(var a=0;a<r;a++)this.cells[s][a]=new f(this,s,a)}}return Object(u.a)(e,[{key:"getCellByLabel",value:function(e){e=e.toUpperCase();for(var r,t=0;t<e.length&&(r=e[t],"A".charCodeAt(0)<=r.charCodeAt(0)&&r.charCodeAt(0)<="Z".charCodeAt(0));)t++;var s=e.substring(0,t),a=e.substring(t);if(0===s.length||0===a.length)throw Error("Incorrect label: ".concat(e));for(var l=parseInt(a)-1,n=0,o=0;o<s.length;o++)n*="Z".charCodeAt(0)-"A".charCodeAt(0)+1,n+=s[o].charCodeAt(0)-"A".charCodeAt(0);if(this.x<=n||this.y<=l)throw Error("No cell: ".concat(e));return this.cells[l][n]}}]),e}()},,function(e,r,t){e.exports=t(33)},,,,,function(e,r,t){},function(e,r,t){},,,,,function(e,r,t){"use strict";t.r(r),t.d(r,"Parser",(function(){return o}));var s=t(4),a=t(5),l=(t(28),t(32)),n=t(11).postProcessors,o=function(){function e(r){var t=this;Object(s.a)(this,e),this.cellsReferenced=[],console.log(grammar),this.parser=new l.Parser(l.Grammar.fromCompiled(grammar)),n.getByLabel=function(e){var s=r(e);return t.cellsReferenced.push(s),s.value};n.log=function(){}}return Object(a.a)(e,[{key:"feed",value:function(e){return this.parser.feed(e)}},{key:"results",get:function(){return this.parser.results[0][0]}}]),e}()},function(e,r,t){"use strict";(function(e){var r=t(2);!function(){var s,a=t(30),l=t(31),n=t(11).postProcessors,o=a.states(l);o.next=(s=o.next,function(){for(var e;(e=s.call(o))&&"whitespace"===e.type;);return e});var c={Lexer:o,ParserRules:[{name:"input",symbols:["expression"]},{name:"expression",symbols:["multi_expr"],postprocess:function(e){var t=Object(r.a)(e,1)[0];return n.log("expression"),n.log("a:",t),t}},{name:"expression",symbols:["expression",o.has("plus")?{type:"plus"}:plus,"multi_expr"],postprocess:function(e){var t=Object(r.a)(e,3),s=t[0],a=(t[1],t[2]);return n.log("expression"),n.log("a:",s),n.log("b:",a),s+a}},{name:"expression",symbols:["expression",o.has("minus")?{type:"minus"}:minus,"multi_expr"],postprocess:function(e){var t=Object(r.a)(e,3),s=t[0],a=(t[1],t[2]);return n.log("expression"),n.log("a:",s),n.log("b:",a),s-a}},{name:"multi_expr",symbols:["primary"],postprocess:function(e){var t=Object(r.a)(e,1)[0];return n.log("multi_expr"),n.log("a:",t),t}},{name:"multi_expr",symbols:["multi_expr",o.has("asterisk")?{type:"asterisk"}:asterisk,"primary"],postprocess:function(e){var t=Object(r.a)(e,3),s=t[0],a=(t[1],t[2]);return n.log("multi_expr"),n.log("a:",s),n.log("b:",a),s*a}},{name:"multi_expr",symbols:["multi_expr",o.has("slash")?{type:"slash"}:slash,"primary"],postprocess:function(e){var t=Object(r.a)(e,3),s=t[0],a=(t[1],t[2]);return n.log("multi_expr"),n.log("a:",s),n.log("b:",a),s/a}},{name:"primary",symbols:[o.has("lparen")?{type:"lparen"}:lparen,"expression",o.has("rparen")?{type:"rparen"}:rparen],postprocess:function(e){return e[1]}},{name:"primary",symbols:[o.has("number")?{type:"number"}:number],postprocess:function(e){var t=Object(r.a)(e,1)[0];return n.log("number:",t.value),t.value}},{name:"primary",symbols:[o.has("minus")?{type:"minus"}:minus,o.has("number")?{type:"number"}:number],postprocess:function(e){var t=Object(r.a)(e,2),s=(t[0],t[1]);return n.log("number:",s.value),-s.value}},{name:"primary",symbols:["cell_ref"],postprocess:function(e){return e[0]}},{name:"primary",symbols:["func"],postprocess:function(e){var t=Object(r.a)(e,1)[0];return n.log("func:",t),t}},{name:"cell_ref",symbols:[o.has("label")?{type:"label"}:label],postprocess:function(e){var t=Object(r.a)(e,1)[0];return n.log("label:",t.value),n.getByLabel(t.value)}},{name:"func",symbols:[o.has("func_call")?{type:"func_call"}:func_call,"args",o.has("func_call_end")?{type:"func_call_end"}:func_call_end],postprocess:function(e){var t=Object(r.a)(e,2),s=t[0],a=t[1];n.log("func_name:",s.value),n.log("args:",a);var l=0,o=!0,c=!1,u=void 0;try{for(var i,p=a[Symbol.iterator]();!(o=(i=p.next()).done);o=!0){l+=i.value}}catch(_){c=!0,u=_}finally{try{o||null==p.return||p.return()}finally{if(c)throw u}}return l}},{name:"args",symbols:["range"],postprocess:function(e){var t=Object(r.a)(e,1)[0];return n.log("range:",t),t}},{name:"args",symbols:["list"],postprocess:function(e){var t=Object(r.a)(e,1)[0];return n.log("list(args):",t),t}},{name:"range",symbols:[o.has("label")?{type:"label"}:label,o.has("colon")?{type:"colon"}:colon,o.has("label")?{type:"label"}:label],postprocess:function(e){var t=Object(r.a)(e,3),s=t[0],a=(t[1],t[2]);return n.log("label1:",s.value),n.log("label2:",a.value),[s.value,":",a.value]}},{name:"list",symbols:[o.has("label")?{type:"label"}:label],postprocess:function(e){var t=Object(r.a)(e,1)[0];return n.getByLabel(t.value),n.log("label(list):",t.value),[n.getByLabel(t.value)]}},{name:"list",symbols:[o.has("label")?{type:"label"}:label,o.has("semicolon")?{type:"semicolon"}:semicolon,"list"],postprocess:function(e){var t=Object(r.a)(e,3),s=t[0],a=(t[1],t[2]);return n.getByLabel(s.value),n.log("label(label ; list):",s.value),n.log("list(label ; list):",a),a.push(n.getByLabel(s.value)),a}}],ParserStart:"input"};"undefined"!==typeof e.exports?e.exports=c:window.grammar=c}()}).call(this,t(29)(e))},,,function(e,r){e.exports={main:{whitespace:{match:/[\s]+/,lineBreaks:!0},func_call:{match:/[a-zA-Z_$][0-9a-zA-Z_$]*\(/,push:"func_args",value:function(e){return e.slice(0,-1)}},label:/[a-zA-Z]+[1-9]+[0-9]*/,plus:"+",asterisk:"*",slash:"/",minus:"-",lparen:"(",rparen:")",number:{match:/[1-9][0-9]*(?:,[0-9]*)?|0\.[0-9]+/,value:function(e){return parseFloat(e)}}},func_args:{func_call_end:{match:")",pop:1},label:/[a-zA-Z]+[1-9]+[0-9]*/,semicolon:";",colon:":",whitespace:/[ ]+/}}},,function(e,r,t){"use strict";t.r(r);var s=t(0),a=t.n(s),l=t(3),n=t.n(l),o=(t(21),t(12));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(a.a.createElement(o.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[16,1,2]]]);
//# sourceMappingURL=main.d164af99.chunk.js.map